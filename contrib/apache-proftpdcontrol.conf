# Apache configuration for ProFTPD Control Panel
# Copy to /etc/apache2/sites-available/proftpdcontrol.conf
# Enable with: a2ensite proftpdcontrol && systemctl reload apache2

<VirtualHost *:80>
    ServerName ftp.example.com
    ServerAdmin admin@example.com

    # Redirect HTTP to HTTPS (recommended)
    # RewriteEngine On
    # RewriteCond %{HTTPS} off
    # RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

    DocumentRoot /opt/proftpdcontrol

    # WSGI configuration
    WSGIDaemonProcess proftpdcontrol python-home=/opt/proftpdcontrol/venv python-path=/opt/proftpdcontrol
    WSGIProcessGroup proftpdcontrol
    WSGIScriptAlias / /opt/proftpdcontrol/proftpdcontrol/wsgi.py

    <Directory /opt/proftpdcontrol/proftpdcontrol>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    # Static files
    Alias /static /opt/proftpdcontrol/static
    <Directory /opt/proftpdcontrol/static>
        Require all granted
    </Directory>

    # Logging
    ErrorLog ${APACHE_LOG_DIR}/proftpdcontrol-error.log
    CustomLog ${APACHE_LOG_DIR}/proftpdcontrol-access.log combined
</VirtualHost>

# HTTPS configuration (recommended)
# <VirtualHost *:443>
#     ServerName ftp.example.com
#     ServerAdmin admin@example.com
#
#     DocumentRoot /opt/proftpdcontrol
#
#     SSLEngine on
#     SSLCertificateFile /etc/ssl/certs/your-cert.pem
#     SSLCertificateKeyFile /etc/ssl/private/your-key.pem
#
#     WSGIDaemonProcess proftpdcontrol-ssl python-home=/opt/proftpdcontrol/venv python-path=/opt/proftpdcontrol
#     WSGIProcessGroup proftpdcontrol-ssl
#     WSGIScriptAlias / /opt/proftpdcontrol/proftpdcontrol/wsgi.py
#
#     <Directory /opt/proftpdcontrol/proftpdcontrol>
#         <Files wsgi.py>
#             Require all granted
#         </Files>
#     </Directory>
#
#     Alias /static /opt/proftpdcontrol/static
#     <Directory /opt/proftpdcontrol/static>
#         Require all granted
#     </Directory>
#
#     ErrorLog ${APACHE_LOG_DIR}/proftpdcontrol-ssl-error.log
#     CustomLog ${APACHE_LOG_DIR}/proftpdcontrol-ssl-access.log combined
# </VirtualHost>
